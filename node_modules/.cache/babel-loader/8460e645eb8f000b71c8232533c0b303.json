{"ast":null,"code":"import{URL}from\"./constants\";var checkResponse=function checkResponse(res){if(res.ok){return res.json();}return res.json().then(function(err){return Promise.reject(err);});};var headersWithContentType={\"Content-Type\":\"application/json\"};export var registerUser=function registerUser(username,password){return fetch(\"\".concat(URL,\"/api/users/\"),{method:\"POST\",headers:headersWithContentType,body:JSON.stringify({username:username,password:password})}).then(checkResponse);};export var loginUser=function loginUser(username,password){return fetch(\"\".concat(URL,\"/api/token/login/\"),{method:\"POST\",headers:headersWithContentType,body:JSON.stringify({username:username,password:password})}).then(checkResponse).then(function(data){if(data.auth_token){localStorage.setItem(\"auth_token\",data.auth_token);return data;}return null;});};export var logoutUser=function logoutUser(){return fetch(\"\".concat(URL,\"/api/token/logout/\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",authorization:\"Token \".concat(localStorage.getItem(\"auth_token\"))}}).then(function(res){if(res.status===204){localStorage.removeItem(\"auth_token\");return res;}return null;});};export var getUser=function getUser(){return fetch(\"\".concat(URL,\"/api/users/me/\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",authorization:\"Token \".concat(localStorage.getItem(\"auth_token\"))}}).then(checkResponse);};export var getCards=function getCards(){var page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return fetch(\"\".concat(URL,\"/api/cats/?page=\").concat(page),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",authorization:\"Token \".concat(localStorage.getItem(\"auth_token\"))}}).then(checkResponse);};export var getCard=function getCard(id){return fetch(\"\".concat(URL,\"/api/cats/\").concat(id,\"/\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",authorization:\"Token \".concat(localStorage.getItem(\"auth_token\"))}}).then(checkResponse);};export var getAchievements=function getAchievements(){return fetch(\"\".concat(URL,\"/api/achievements/\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",authorization:\"Token \".concat(localStorage.getItem(\"auth_token\"))}}).then(checkResponse);};export var sendCard=function sendCard(card){return fetch(\"\".concat(URL,\"/api/cats/\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",authorization:\"Token \".concat(localStorage.getItem(\"auth_token\"))},body:JSON.stringify(card)}).then(checkResponse);};export var updateCard=function updateCard(card,id){return fetch(\"\".concat(URL,\"/api/cats/\").concat(id,\"/\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",authorization:\"Token \".concat(localStorage.getItem(\"auth_token\"))},body:JSON.stringify(card)}).then(checkResponse);};export var deleteCard=function deleteCard(id){return fetch(\"\".concat(URL,\"/api/cats/\").concat(id,\"/\"),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",authorization:\"Token \".concat(localStorage.getItem(\"auth_token\"))}}).then(function(res){if(res.status===204){return{status:true};}return{status:false};});};","map":{"version":3,"sources":["/workspaces/python_kittygram_frontend_es/src/utils/api.js"],"names":["URL","checkResponse","res","ok","json","then","err","Promise","reject","headersWithContentType","registerUser","username","password","fetch","method","headers","body","JSON","stringify","loginUser","data","auth_token","localStorage","setItem","logoutUser","authorization","getItem","status","removeItem","getUser","getCards","page","getCard","id","getAchievements","sendCard","card","updateCard","deleteCard"],"mappings":"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","sourcesContent":["import { URL } from \"./constants\";\n\nconst checkResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return res.json().then((err) => Promise.reject(err));\n};\nconst headersWithContentType = { \"Content-Type\": \"application/json\" };\n\nexport const registerUser = (username, password) => {\n  return fetch(`${URL}/api/users/`, {\n    method: \"POST\",\n    headers: headersWithContentType,\n    body: JSON.stringify({ username, password }),\n  }).then(checkResponse);\n};\n\nexport const loginUser = (username, password) => {\n  return fetch(`${URL}/api/token/login/`, {\n    method: \"POST\",\n    headers: headersWithContentType,\n    body: JSON.stringify({ username, password }),\n  })\n    .then(checkResponse)\n    .then((data) => {\n      if (data.auth_token) {\n        localStorage.setItem(\"auth_token\", data.auth_token);\n        return data;\n      }\n      return null;\n    });\n};\n\nexport const logoutUser = () => {\n  return fetch(`${URL}/api/token/logout/`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Token ${localStorage.getItem(\"auth_token\")}`,\n    },\n  }).then((res) => {\n    if (res.status === 204) {\n      localStorage.removeItem(\"auth_token\");\n      return res;\n    }\n    return null;\n  });\n};\n\nexport const getUser = () => {\n  return fetch(`${URL}/api/users/me/`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Token ${localStorage.getItem(\"auth_token\")}`,\n    },\n  }).then(checkResponse);\n};\n\nexport const getCards = (page = 1) => {\n  return fetch(`${URL}/api/cats/?page=${page}`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Token ${localStorage.getItem(\"auth_token\")}`,\n    },\n  }).then(checkResponse);\n};\n\nexport const getCard = (id) => {\n  return fetch(`${URL}/api/cats/${id}/`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Token ${localStorage.getItem(\"auth_token\")}`,\n    },\n  }).then(checkResponse);\n};\n\nexport const getAchievements = () => {\n  return fetch(`${URL}/api/achievements/`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Token ${localStorage.getItem(\"auth_token\")}`,\n    },\n  }).then(checkResponse);\n};\n\nexport const sendCard = (card) => {\n  return fetch(`${URL}/api/cats/`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Token ${localStorage.getItem(\"auth_token\")}`,\n    },\n    body: JSON.stringify(card),\n  }).then(checkResponse);\n};\n\nexport const updateCard = (card, id) => {\n  return fetch(`${URL}/api/cats/${id}/`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Token ${localStorage.getItem(\"auth_token\")}`,\n    },\n    body: JSON.stringify(card),\n  }).then(checkResponse);\n};\n\nexport const deleteCard = (id) => {\n  return fetch(`${URL}/api/cats/${id}/`, {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: `Token ${localStorage.getItem(\"auth_token\")}`,\n    },\n  }).then((res) => {\n    if (res.status === 204) {\n      return { status: true };\n    }\n    return { status: false };\n  });\n};\n"]},"metadata":{},"sourceType":"module"}