{"ast":null,"code":"import _slicedToArray from\"/workspaces/python_kittygram_frontend_es/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useHistory,useParams}from\"react-router-dom\";import{deleteCard,getCard}from\"../../utils/api\";import{UserContext}from\"../../utils/context\";import returnIcon from\"../../images/left.svg\";import editIcon from\"../../images/edit.svg\";import defaultImg from\"../../images/default-kitty.jpg\";import removeIcon from\"../../images/trash.svg\";import{ButtonSecondary}from\"../ui/button-secondary/button-secondary\";import{ButtonHeader}from\"../ui/button-header/button-header\";import styles from\"./card-page.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var CardPage=function CardPage(_ref){var _data$image;var data=_ref.data,setData=_ref.setData,_ref$extraClass=_ref.extraClass,extraClass=_ref$extraClass===void 0?\"\":_ref$extraClass;var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),achievements=_React$useState2[0],setAchievements=_React$useState2[1];var _React$useContext=React.useContext(UserContext),_React$useContext2=_slicedToArray(_React$useContext,1),user=_React$useContext2[0];var history=useHistory();var params=useParams();React.useEffect(function(){getCard(params.id).then(function(res){if(res&&res.id){setData(res);var resString=\"\";res.achievements.forEach(function(item){resString?resString+=\", \".concat(item.achievement_name):resString=item.achievement_name;});setAchievements(resString);}});},[params.id,setData]);var handleReturn=function handleReturn(){setData({});history.push(\"/\");};var handleRemoveCard=function handleRemoveCard(){deleteCard(data.id).then(function(res){if(res.status){history.replace({pathname:\"/\"});}}).catch(function(err){console.log(err.message);});};var colorText=data.color===\"black\"||data.color===\"saddlebrown\"||data.color===\"gray\"||data.color===\"darkgray\"?\"white\":\"primary\";return/*#__PURE__*/_jsxs(\"article\",{className:\"\".concat(styles.content,\" \").concat(extraClass),children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.btns_box_mobile,children:[/*#__PURE__*/_jsx(ButtonSecondary,{extraClass:styles.mobile_btn,icon:returnIcon,onClick:handleReturn}),data.owner&&data.owner===user.id&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ButtonHeader,{extraClass:\"\".concat(styles.mobile_btn),icon:editIcon,to:\"/cats/edit\"}),/*#__PURE__*/_jsx(ButtonSecondary,{extraClass:styles.mobile_btn,icon:removeIcon,onClick:handleRemoveCard})]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.img_box,children:/*#__PURE__*/_jsx(\"img\",{className:styles.img,src:(_data$image=data.image)!==null&&_data$image!==void 0?_data$image:defaultImg,alt:\"\\u0424\\u043E\\u0442\\u043E \\u043A\\u043E\\u0442\\u0438\\u043A\\u0430.\"})}),/*#__PURE__*/_jsx(ButtonSecondary,{extraClass:\"\".concat(styles.desktop_btn,\" \").concat(styles.desk_return),icon:returnIcon,onClick:handleReturn}),data.owner&&data.owner===user.id&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ButtonHeader,{extraClass:\"\".concat(styles.desktop_btn,\" \").concat(styles.desk_edit),icon:editIcon,to:\"/cats/edit\"}),/*#__PURE__*/_jsx(ButtonSecondary,{extraClass:\"\".concat(styles.desktop_btn,\" \").concat(styles.desk_remove),icon:removeIcon,onClick:handleRemoveCard})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_h2-5 text_color_primary mt-35 mb-10 \".concat(styles.name),children:data.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_h3 text_color_secondary \".concat(styles.date),children:data.birth_year}),/*#__PURE__*/_jsx(\"div\",{className:styles.cat_color_box,style:{backgroundColor:data.color},children:/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_medium-20 text_color_\".concat(colorText,\" \").concat(styles.cat_color),children:data.color})}),/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_h3 \".concat(styles.achievements),children:achievements})]});};","map":{"version":3,"sources":["/workspaces/python_kittygram_frontend_es/src/components/card-page/card-page.jsx"],"names":["React","useHistory","useParams","deleteCard","getCard","UserContext","returnIcon","editIcon","defaultImg","removeIcon","ButtonSecondary","ButtonHeader","styles","CardPage","data","setData","extraClass","useState","achievements","setAchievements","useContext","user","history","params","useEffect","id","then","res","resString","forEach","item","achievement_name","handleReturn","push","handleRemoveCard","status","replace","pathname","catch","err","console","log","message","colorText","color","content","container","btns_box_mobile","mobile_btn","owner","img_box","img","image","desktop_btn","desk_return","desk_edit","desk_remove","name","date","birth_year","cat_color_box","backgroundColor","cat_color"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nimport { deleteCard, getCard } from \"../../utils/api\";\nimport { UserContext } from \"../../utils/context\";\n\nimport returnIcon from \"../../images/left.svg\";\nimport editIcon from \"../../images/edit.svg\";\nimport defaultImg from \"../../images/default-kitty.jpg\";\nimport removeIcon from \"../../images/trash.svg\";\n\nimport { ButtonSecondary } from \"../ui/button-secondary/button-secondary\";\nimport { ButtonHeader } from \"../ui/button-header/button-header\";\n\nimport styles from \"./card-page.module.css\";\n\nexport const CardPage = ({ data, setData, extraClass = \"\" }) => {\n  const [achievements, setAchievements] = React.useState(\"\");\n  const [user] = React.useContext(UserContext);\n\n  const history = useHistory();\n  const params = useParams();\n\n  React.useEffect(() => {\n    getCard(params.id).then((res) => {\n      if (res && res.id) {\n        setData(res);\n\n        let resString = \"\";\n        res.achievements.forEach((item) => {\n          resString\n            ? (resString += `, ${item.achievement_name}`)\n            : (resString = item.achievement_name);\n        });\n        setAchievements(resString);\n      }\n    });\n  }, [params.id, setData]);\n\n  const handleReturn = () => {\n    setData({});\n    history.push(\"/\");\n  };\n\n  const handleRemoveCard = () => {\n    deleteCard(data.id)\n      .then((res) => {\n        if (res.status) {\n          history.replace({ pathname: \"/\" });\n        }\n      })\n      .catch((err) => {\n        console.log(err.message);\n      });\n  };\n\n  const colorText =\n    data.color === \"black\" ||\n    data.color === \"saddlebrown\" ||\n    data.color === \"gray\" ||\n    data.color === \"darkgray\"\n      ? \"white\"\n      : \"primary\";\n\n  return (\n    <article className={`${styles.content} ${extraClass}`}>\n      <div className={styles.container}>\n        <div className={styles.btns_box_mobile}>\n          <ButtonSecondary\n            extraClass={styles.mobile_btn}\n            icon={returnIcon}\n            onClick={handleReturn}\n          />\n          {data.owner && data.owner === user.id && (\n            <>\n              <ButtonHeader\n                extraClass={`${styles.mobile_btn}`}\n                icon={editIcon}\n                to=\"/cats/edit\"\n              />\n              <ButtonSecondary\n                extraClass={styles.mobile_btn}\n                icon={removeIcon}\n                onClick={handleRemoveCard}\n              />\n            </>\n          )}\n        </div>\n        <div className={styles.img_box}>\n          <img\n            className={styles.img}\n            src={data.image ?? defaultImg}\n            alt=\"Фото котика.\"\n          />\n        </div>\n        <ButtonSecondary\n          extraClass={`${styles.desktop_btn} ${styles.desk_return}`}\n          icon={returnIcon}\n          onClick={handleReturn}\n        />\n        {data.owner && data.owner === user.id && (\n          <>\n            <ButtonHeader\n              extraClass={`${styles.desktop_btn} ${styles.desk_edit}`}\n              icon={editIcon}\n              to=\"/cats/edit\"\n            />\n            <ButtonSecondary\n              extraClass={`${styles.desktop_btn} ${styles.desk_remove}`}\n              icon={removeIcon}\n              onClick={handleRemoveCard}\n            />\n          </>\n        )}\n      </div>\n      <p\n        className={`text text_type_h2-5 text_color_primary mt-35 mb-10 ${styles.name}`}\n      >\n        {data.name}\n      </p>\n      <p className={`text text_type_h3 text_color_secondary ${styles.date}`}>\n        {data.birth_year}\n      </p>\n      <div\n        className={styles.cat_color_box}\n        style={{ backgroundColor: data.color }}\n      >\n        <p\n          className={`text text_type_medium-20 text_color_${colorText} ${styles.cat_color}`}\n        >\n          {data.color}\n        </p>\n      </div>\n      <p className={`text text_type_h3 ${styles.achievements}`}>\n        {achievements}\n      </p>\n    </article>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}