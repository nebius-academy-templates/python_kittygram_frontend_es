{"ast":null,"code":"import _slicedToArray from\"/workspaces/python_kittygram_frontend_es/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{getCards}from\"../../utils/api\";import{MainCard}from\"../main-card/main-card\";import{PaginationBox}from\"../pagination-box/pagination-box\";import styles from\"./main-page.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var MainPage=function MainPage(_ref){var queryPage=_ref.queryPage,setQueryPage=_ref.setQueryPage,_ref$extraClass=_ref.extraClass,extraClass=_ref$extraClass===void 0?\"\":_ref$extraClass;var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),cards=_React$useState2[0],setCards=_React$useState2[1];var _React$useState3=React.useState({}),_React$useState4=_slicedToArray(_React$useState3,2),pagData=_React$useState4[0],setPagData=_React$useState4[1];React.useEffect(function(){getCards(queryPage).then(function(res){setPagData({count:res.count,pages:Math.ceil(res.count/10)});setCards(res.results);}).catch(function(err){if(err.detail===\"Invalid page.\"){getCards(queryPage-1).then(function(res){setQueryPage(queryPage-1);setPagData({count:res.count,pages:Math.ceil(res.count/10)});setCards(res.results);}).catch(function(err){console.error(err);});}else{console.error(err);}});},[queryPage,setQueryPage]);return/*#__PURE__*/_jsxs(\"section\",{className:\"\".concat(styles.content,\" \").concat(extraClass),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text text_type_h2 text_color_primary mt-25 mb-20 \".concat(styles.title),children:\"Adorable cats\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.box,children:cards.map(function(item,index){return/*#__PURE__*/_jsx(MainCard,{cardId:item.id,img:item.image,name:item.name,date:item.birth_year,color:item.color},index);})}),pagData.count>10&&/*#__PURE__*/_jsx(PaginationBox,{data:pagData,queryPage:queryPage,setQueryPage:setQueryPage})]});};","map":{"version":3,"sources":["/workspaces/python_kittygram_frontend_es/src/components/main-page/main-page.jsx"],"names":["React","getCards","MainCard","PaginationBox","styles","MainPage","queryPage","setQueryPage","extraClass","useState","cards","setCards","pagData","setPagData","useEffect","then","res","count","pages","Math","ceil","results","catch","err","detail","console","error","content","title","box","map","item","index","id","image","name","birth_year","color"],"mappings":"8HAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,QAAT,KAAyB,iBAAzB,CAEA,OAASC,QAAT,KAAyB,wBAAzB,CACA,OAASC,aAAT,KAA8B,kCAA9B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,C,wFAEA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAkD,IAA/CC,CAAAA,SAA+C,MAA/CA,SAA+C,CAApCC,YAAoC,MAApCA,YAAoC,sBAAtBC,UAAsB,CAAtBA,UAAsB,0BAAT,EAAS,iBACxE,oBAA0BR,KAAK,CAACS,QAAN,CAAe,EAAf,CAA1B,oDAAOC,KAAP,qBAAcC,QAAd,qBACA,qBAA8BX,KAAK,CAACS,QAAN,CAAe,EAAf,CAA9B,qDAAOG,OAAP,qBAAgBC,UAAhB,qBAEAb,KAAK,CAACc,SAAN,CAAgB,UAAM,CACpBb,QAAQ,CAACK,SAAD,CAAR,CACGS,IADH,CACQ,SAACC,GAAD,CAAS,CACbH,UAAU,CAAC,CACTI,KAAK,CAAED,GAAG,CAACC,KADF,CAETC,KAAK,CAAEC,IAAI,CAACC,IAAL,CAAUJ,GAAG,CAACC,KAAJ,CAAY,EAAtB,CAFE,CAAD,CAAV,CAIAN,QAAQ,CAACK,GAAG,CAACK,OAAL,CAAR,CACD,CAPH,EAQGC,KARH,CAQS,SAACC,GAAD,CAAS,CACd,GAAIA,GAAG,CAACC,MAAJ,GAAe,eAAnB,CAAoC,CAClCvB,QAAQ,CAACK,SAAS,CAAG,CAAb,CAAR,CACGS,IADH,CACQ,SAACC,GAAD,CAAS,CACbT,YAAY,CAACD,SAAS,CAAG,CAAb,CAAZ,CACAO,UAAU,CAAC,CACTI,KAAK,CAAED,GAAG,CAACC,KADF,CAETC,KAAK,CAAEC,IAAI,CAACC,IAAL,CAAUJ,GAAG,CAACC,KAAJ,CAAY,EAAtB,CAFE,CAAD,CAAV,CAIAN,QAAQ,CAACK,GAAG,CAACK,OAAL,CAAR,CACD,CARH,EASGC,KATH,CASS,SAACC,GAAD,CAAS,CACdE,OAAO,CAACC,KAAR,CAAcH,GAAd,EACD,CAXH,EAYD,CAbD,IAaO,CACLE,OAAO,CAACC,KAAR,CAAcH,GAAd,EACD,CACF,CAzBH,EA0BD,CA3BD,CA2BG,CAACjB,SAAD,CAAYC,YAAZ,CA3BH,EA6BA,mBACE,iBAAS,SAAS,WAAKH,MAAM,CAACuB,OAAZ,aAAuBnB,UAAvB,CAAlB,wBACE,WACE,SAAS,4DAAsDJ,MAAM,CAACwB,KAA7D,CADX,2BADF,cAME,YAAK,SAAS,CAAExB,MAAM,CAACyB,GAAvB,UACGnB,KAAK,CAACoB,GAAN,CAAU,SAACC,IAAD,CAAOC,KAAP,CAAiB,CAC1B,mBACE,KAAC,QAAD,EACE,MAAM,CAAED,IAAI,CAACE,EADf,CAGE,GAAG,CAAEF,IAAI,CAACG,KAHZ,CAIE,IAAI,CAAEH,IAAI,CAACI,IAJb,CAKE,IAAI,CAAEJ,IAAI,CAACK,UALb,CAME,KAAK,CAAEL,IAAI,CAACM,KANd,EAEOL,KAFP,CADF,CAUD,CAXA,CADH,EANF,CAoBGpB,OAAO,CAACK,KAAR,CAAgB,EAAhB,eACC,KAAC,aAAD,EACE,IAAI,CAAEL,OADR,CAEE,SAAS,CAAEN,SAFb,CAGE,YAAY,CAAEC,YAHhB,EArBJ,GADF,CA8BD,CA/DM","sourcesContent":["import React from \"react\";\n\nimport { getCards } from \"../../utils/api\";\n\nimport { MainCard } from \"../main-card/main-card\";\nimport { PaginationBox } from \"../pagination-box/pagination-box\";\n\nimport styles from \"./main-page.module.css\";\n\nexport const MainPage = ({ queryPage, setQueryPage, extraClass = \"\" }) => {\n  const [cards, setCards] = React.useState([]);\n  const [pagData, setPagData] = React.useState({});\n\n  React.useEffect(() => {\n    getCards(queryPage)\n      .then((res) => {\n        setPagData({\n          count: res.count,\n          pages: Math.ceil(res.count / 10),\n        });\n        setCards(res.results);\n      })\n      .catch((err) => {\n        if (err.detail === \"Invalid page.\") {\n          getCards(queryPage - 1)\n            .then((res) => {\n              setQueryPage(queryPage - 1);\n              setPagData({\n                count: res.count,\n                pages: Math.ceil(res.count / 10),\n              });\n              setCards(res.results);\n            })\n            .catch((err) => {\n              console.error(err);\n            });\n        } else {\n          console.error(err);\n        }\n      });\n  }, [queryPage, setQueryPage]);\n\n  return (\n    <section className={`${styles.content} ${extraClass}`}>\n      <h2\n        className={`text text_type_h2 text_color_primary mt-25 mb-20 ${styles.title}`}\n      >\n        Adorable cats\n      </h2>\n      <div className={styles.box}>\n        {cards.map((item, index) => {\n          return (\n            <MainCard\n              cardId={item.id}\n              key={index}\n              img={item.image}\n              name={item.name}\n              date={item.birth_year}\n              color={item.color}\n            />\n          );\n        })}\n      </div>\n      {pagData.count > 10 && (\n        <PaginationBox\n          data={pagData}\n          queryPage={queryPage}\n          setQueryPage={setQueryPage}\n        />\n      )}\n    </section>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}