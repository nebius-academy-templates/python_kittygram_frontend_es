{"ast":null,"code":"import _defineProperty from\"/workspaces/python_kittygram_frontend_es/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/workspaces/python_kittygram_frontend_es/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/workspaces/python_kittygram_frontend_es/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useHistory}from\"react-router-dom\";import{sendCard}from\"../../utils/api\";import{colorsList,getBase64}from\"../../utils/constants\";import returnIcon from\"../../images/left.svg\";import addImgIcon from\"../../images/image.svg\";import{ButtonForm}from\"../ui/button-form/button-form\";import{Select}from\"../ui/select/select\";import{ButtonSecondary}from\"../ui/button-secondary/button-secondary\";import{Input}from\"../ui/input/input\";import{ColorsBox}from\"../ui/colors-box/colors-box\";import styles from\"./add-card-page.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var AddCardPage=function AddCardPage(_ref){var _ref$extraClass=_ref.extraClass,extraClass=_ref$extraClass===void 0?\"\":_ref$extraClass;var _React$useState=React.useState(\"#FFFFFF\"),_React$useState2=_slicedToArray(_React$useState,2),currentColor=_React$useState2[0],setCurrentColor=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),currentFileName=_React$useState4[0],setCurrentFileName=_React$useState4[1];var _React$useState5=React.useState({color:currentColor,achievements:[]}),_React$useState6=_slicedToArray(_React$useState5,2),card=_React$useState6[0],setCard=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),errorName=_React$useState8[0],setErrorName=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),errorAge=_React$useState10[0],setErrorAge=_React$useState10[1];var history=useHistory();var handleReturn=function handleReturn(){history.goBack();};var onChangeInput=function onChangeInput(e){setCard(_objectSpread(_objectSpread({},card),{},_defineProperty({},e.target.name,e.target.value)));e.target.name===\"image\"&&setCurrentFileName(e.target.value);};var handleResponse=function handleResponse(res){if(typeof res.name===\"object\"){setErrorName(\"The name field is required\");}else if(typeof res.birth_year===\"object\"){setErrorAge(\"The birth year field is required\");}};var handleSubmit=function handleSubmit(){errorAge&&setErrorAge(\"\");errorName&&setErrorName(\"\");var photo=document.querySelector('input[type=\"file\"]').files[0];photo?getBase64(photo).then(function(data){card[\"image\"]=data;sendCard(card).then(function(res){if(res&&res.id){history.push(\"/cats/\".concat(res.id));}}).catch(handleResponse);}):sendCard(card).then(function(res){if(res&&res.id){history.push(\"/cats/\".concat(res.id));}}).catch(handleResponse);};return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.content,\" \").concat(extraClass),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text text_type_h2 text_color_primary mt-25 mb-9\",children:\"New cat\"}),/*#__PURE__*/_jsx(ButtonSecondary,{extraClass:styles.return_btn_mobile,icon:returnIcon,onClick:handleReturn}),/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"image\",className:styles.img_box,children:[/*#__PURE__*/_jsx(\"img\",{className:styles.img,src:addImgIcon,alt:\"Add picture\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_medium-16 text_color_primary\",children:currentFileName?currentFileName:\"Upload a JPEG image\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:styles.file_input,name:\"image\",id:\"image\",onChange:onChangeInput}),/*#__PURE__*/_jsx(Input,{onChange:onChangeInput,name:\"name\",type:\"text\",placeholder:\"Name\",error:errorName}),/*#__PURE__*/_jsx(Input,{onChange:onChangeInput,name:\"birth_year\",type:\"text\",placeholder:\"Year of birth\",error:errorAge}),/*#__PURE__*/_jsx(ColorsBox,{colorsList:colorsList,currentColor:currentColor,setCurrentColor:setCurrentColor,card:card,setCard:setCard}),/*#__PURE__*/_jsx(Select,{card:card,setCard:setCard}),/*#__PURE__*/_jsx(ButtonForm,{extraClass:styles.submit_btn,text:\"Save\",onClick:handleSubmit}),/*#__PURE__*/_jsx(ButtonSecondary,{extraClass:styles.return_btn,icon:returnIcon,onClick:handleReturn})]})]});};","map":{"version":3,"sources":["/workspaces/python_kittygram_frontend_es/src/components/add-card-page/add-card-page.jsx"],"names":["React","useHistory","sendCard","colorsList","getBase64","returnIcon","addImgIcon","ButtonForm","Select","ButtonSecondary","Input","ColorsBox","styles","AddCardPage","extraClass","useState","currentColor","setCurrentColor","currentFileName","setCurrentFileName","color","achievements","card","setCard","errorName","setErrorName","errorAge","setErrorAge","history","handleReturn","goBack","onChangeInput","e","target","name","value","handleResponse","res","birth_year","handleSubmit","photo","document","querySelector","files","then","data","id","push","catch","content","return_btn_mobile","container","img_box","img","file_input","submit_btn","return_btn"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { sendCard } from \"../../utils/api\";\nimport { colorsList, getBase64 } from \"../../utils/constants\";\n\nimport returnIcon from \"../../images/left.svg\";\nimport addImgIcon from \"../../images/image.svg\";\n\nimport { ButtonForm } from \"../ui/button-form/button-form\";\nimport { Select } from \"../ui/select/select\";\nimport { ButtonSecondary } from \"../ui/button-secondary/button-secondary\";\nimport { Input } from \"../ui/input/input\";\nimport { ColorsBox } from \"../ui/colors-box/colors-box\";\n\nimport styles from \"./add-card-page.module.css\";\n\nexport const AddCardPage = ({ extraClass = \"\" }) => {\n  const [currentColor, setCurrentColor] = React.useState(\"#FFFFFF\");\n  const [currentFileName, setCurrentFileName] = React.useState(\"\");\n  const [card, setCard] = React.useState({\n    color: currentColor,\n    achievements: [],\n  });\n  const [errorName, setErrorName] = React.useState(\"\");\n  const [errorAge, setErrorAge] = React.useState(\"\");\n\n  const history = useHistory();\n\n  const handleReturn = () => {\n    history.goBack();\n  };\n\n  const onChangeInput = (e) => {\n    setCard({\n      ...card,\n      [e.target.name]: e.target.value,\n    });\n    e.target.name === \"image\" && setCurrentFileName(e.target.value);\n  };\n\n  const handleResponse = (res) => {\n    if (typeof res.name === \"object\") {\n      setErrorName(\"The name field is required\");\n    } else if (typeof res.birth_year === \"object\") {\n      setErrorAge(\"The birth year field is required\");\n    }\n  };\n\n  const handleSubmit = () => {\n    errorAge && setErrorAge(\"\");\n    errorName && setErrorName(\"\");\n\n    const photo = document.querySelector('input[type=\"file\"]').files[0];\n    photo\n      ? getBase64(photo).then((data) => {\n          card[\"image\"] = data;\n          sendCard(card)\n            .then((res) => {\n              if (res && res.id) {\n                history.push(`/cats/${res.id}`);\n              }\n            })\n            .catch(handleResponse);\n        })\n      : sendCard(card)\n          .then((res) => {\n            if (res && res.id) {\n              history.push(`/cats/${res.id}`);\n            }\n          })\n          .catch(handleResponse);\n  };\n\n  return (\n    <div className={`${styles.content} ${extraClass}`}>\n      <h2 className=\"text text_type_h2 text_color_primary mt-25 mb-9\">\n        New cat\n      </h2>\n      <ButtonSecondary\n        extraClass={styles.return_btn_mobile}\n        icon={returnIcon}\n        onClick={handleReturn}\n      />\n      <div className={styles.container}>\n        <label htmlFor=\"image\" className={styles.img_box}>\n          <img\n            className={styles.img}\n            src={addImgIcon}\n            alt=\"Add picture\"\n          />\n          <p className=\"text text_type_medium-16 text_color_primary\">\n            {currentFileName\n              ? currentFileName\n              : \"Upload a JPEG image\"}\n          </p>\n        </label>\n        <input\n          type=\"file\"\n          className={styles.file_input}\n          name=\"image\"\n          id=\"image\"\n          onChange={onChangeInput}\n        />\n        <Input\n          onChange={onChangeInput}\n          name=\"name\"\n          type=\"text\"\n          placeholder=\"Name\"\n          error={errorName}\n        />\n        <Input\n          onChange={onChangeInput}\n          name=\"birth_year\"\n          type=\"text\"\n          placeholder=\"Year of birth\"\n          error={errorAge}\n        />\n        <ColorsBox\n          colorsList={colorsList}\n          currentColor={currentColor}\n          setCurrentColor={setCurrentColor}\n          card={card}\n          setCard={setCard}\n        />\n        <Select card={card} setCard={setCard} />\n        <ButtonForm\n          extraClass={styles.submit_btn}\n          text=\"Save\"\n          onClick={handleSubmit}\n        />\n        <ButtonSecondary\n          extraClass={styles.return_btn}\n          icon={returnIcon}\n          onClick={handleReturn}\n        />\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}